{% extends "base.html" %}
{% block title %} ТВ {% endblock %}
{% load static %}
{% block content %}

<div class="slider_container">
    <header class="slider manrope">
        Заявка на подключение
    </header>
</div>

<div class="offer_container">

    <div class="offer">
        <div class="nav_offer">
            <a href="/offer/internet+tv" class="nav_offer_block manrope"> Интернет + ТВ </a>
            <a href="/offer/internet" class="nav_offer_block manrope"> Интернет </a>
            <a href="/offer/tv" class="nav_offer_block manrope"> ТВ </a>
            <a href="/offer/hosting" class="nav_offer_block manrope"> Хостинг </a>
        </div>

        <div class="offer_name manrope">
            ТВ
        </div>

        <label class="switch manrope">
            <input type="checkbox">
            <span class="slider1"></span>
        </label>

        <div class="manrope offer_title">
            Выберите тарифное предложение
        </div>

        <div class="offer_tariff_container">

            {% for tariff in tariffs %}
            <div class="offer_card_container">
                <div class="offer_card_info" style="margin:0 100px 0 0;">
                    <div class="manrope offer_card_info_title"> {{tariff.name}}</div>
                    <div class="manrope offer_card_info_text"> Wi-Fi роутер бесплатно <br> ТВ-приставка бесплатно</div>
                </div>

                <div class="offer_card_info" style="flex-direction:row;" >
                    <img src="{% static 'img/channels.png'%}"/>
                    <div class="manrope offer_card_info_text"> {{tariff.channels}} каналов </div>
                </div>

                <div class="offer_card_info" style="margin:0 0 0 50px;">
                    <h3 class="manrope"> {{tariff.price}}  </h3>
                    <label class="checkbox-btn manrope">
                            <input  value = "{{tariff.price}}"  onchange="Change(this);" type="checkbox">
                            <span> Выбрать </span>
                    </label>
                </div>

            </div>
            {% endfor %}


        </div>
    </div>

</div>

<div style="display: flex;
                    flex-direction: row; gap:50px;">
    <div class="form_offer_container">
        <h2 class="manrope offer_title">
            Оформите заявку на подключение
        </h2>
        <form method="post">
                {% csrf_token %}
                <div class="form_offer">
                    <input type="hidden" name="user_id" value="0" required="" id="id_user_id">

                    <input type="hidden" name="date"   id="id_date">


                    <h3 class="manrope"> Контактные данные: </h3>
                    <div class="form_field">

                        <div style="display:flex; flex-direction:column; gap:5px;">
                            <div class="small_label"> Ваше имя </div>
                            {{offer_form.name}}
                        </div>

                        <div style="display:flex; flex-direction:column; gap:5px;">
                            <div class="small_label"> Телефон </div>
                            {{offer_form.phone_number}}
                        </div>

                    </div>

                    <h3 class="manrope"> Адрес подключения: </h3>
                    <div class="form_field">

                        <div style="display:flex; flex-direction:column; gap:5px;">
                            <div class="small_label"> Регион </div>
                            {{offer_form.region}}
                        </div>

                        <div style="display:flex; flex-direction:column; gap:5px;">
                             <div class="small_label"> Город </div>
                             {{offer_form.city}}
                        </div>
                    </div>

                     {{offer_form.adress}}


                    <input type="hidden" id="id_tariff_info"  name ="tariff_info">
                    <div class="form_field">
                        <input type="checkbox" style="box-sizing: border-box;
                            width: 24px;
                            height: 24px;

                            /* Line/Inactive */

                            border: 1px solid #CAD6E2;
                            border-radius: 4px;">
                        <div class="small_label" style="margin:0 75px 0 0;"> Отправляя заявку, я соглашаюсь на обработку своих персональных данных, согласно <br> <b> политике конфиденциальности </b>  </div>
                        <div class="Button_small_blue" >
                            <input class="submit_button" type="submit" value="Отправить заявку">
                        </div>
                    </div>

                </div>


            </form>
        <div>

        </div>

    </div>
    <div class="calculator_container">
        <h2 class="manrope"> Итоговая стоимость: </h2>
        <div class="manrope" style="font-size:20px;" id="stoimost"></div>

        <div class="manrope" style="margin:100px 0 0px 0px;"> Вы также можете связаться с нами по телефону:</div>
        <h2 class="manrope"> +7(499) 404-04-71 </h2>
    </div>
</div>


<style>

    .offer_container{

        margin: -60px 0 0 0;
    }

</style>


<script>
const v = document.getElementById("id_tariff_info");
function Change(Element) {

	if (Element.checked == true)
        {
             v.value =  "Заявка на ТВ "+ Element.name + " " + Element.value;
             document.getElementById('stoimost').innerHTML = "";
             document.getElementById('stoimost').innerHTML = "Стоимость равна: "+ v.value;
             Element.nextElementSibling.innerHTML = "Выбран";
        }

	else {
	        document.getElementById('stoimost').innerHTML = "";
	        Element.nextElementSibling.innerHTML = "Выбрать";
	      }
}

</script>
{% endblock %}